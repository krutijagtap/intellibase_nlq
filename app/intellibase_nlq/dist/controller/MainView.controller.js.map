{"version":3,"file":"MainView.controller.js","names":["sap","ui","define","Controller","JSONModel","Filter","FilterOperator","StandardListItem","MessageBox","BusyDialog","extend","onInit","async","this","_oODataModel","getOwnerComponent","getModel","_oCategoryModel","_oProductModel","getView","setModel","_oCategorySelect","byId","_oProductSelect","_oPromptList","loadCategories","loadProducts","loadPrompts","oBinding","bindContext","execute","result","getBoundContext","getObject","aCategories","value","unshift","category","oJSONModel","aProducts","product","aFilters","push","EQ","getBinding","filter","bindItems","path","template","title","description","filters","onCategoryChange","oEvent","selectedCategory","getParameter","getKey","selectedProduct","getSelectedKey","onProductChange","onSelectPrompt","setVisible","setContent","oContext","getBindingContext","oData","sPrompt","prompt","oModel","oFunction","setParameter","oResult","keyEntries","Object","entries","key","startsWith","aKeyFields","map","index","replace","number","obj","toLowerCase","indexOf","Boolean","sort","a","b","i","sHighlightedPrompt","highlightKeywords","setValue","colors","sLegendHtml","k","color","length","join","err","console","error","sPromptText","highlightedText","forEach","keyword","safeKeyword","regex","RegExp","match","onSearchLive","getBaseUrl","require","toUrl","fetchCsrfToken","url","response","fetch","method","credentials","headers","token","get","onPressButton","userInput","getValue","oView","sInput","trim","oBusyDialog","m","text","open","setBusy","Promise","resolve","resp","onfetchData","close","chatUrl","thisUser","csrf","controller","AbortController","timeout","setTimeout","abort","user","ok","userDetails","json","log","bankId","name","payload","message","body","JSON","stringify","signal","clearTimeout","Error","status","data","sFinalResult","FINAL_RESULT","sSQLQuery","SQL_QUERY","bIsHtml","test","sSafeFinalResult","sSqlHtml","sCombinedHtml","_escapeHtml","s","onChatCopy","oChatBox","domRef","getDomRef","MessageToast","show","innerText","navigator","clipboard","writeText","then","catch","onChatExport","window","jspdf","html2canvas","jsPDF","plainText","wrapper","document","createElement","style","width","padding","background","fontFamily","position","top","left","appendChild","userInputBox","borderRadius","marginBottom","border","headerText","textContent","fontSize","fontWeight","userInputText","responseClone","cloneNode","margin","requestAnimationFrame","canvas","scale","useCORS","scrollY","windowWidth","scrollWidth","height","scrollHeight","imgData","toDataURL","pdf","pdfWidth","internal","pageSize","getWidth","pdfHeight","getHeight","imgWidth","imgHeight","heightLeft","addImage","addPage","save","removeChild","onPressReset","oCatSelect","oProdSelect","setSelectedKey","editablePrompt","oLegend","oHtmlContent","oChatBotResult","setText"],"sources":["MainView-dbg.controller.js"],"mappings":"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","ignoreList":[]}